!function(t){var s={};function i(h){if(s[h])return s[h].exports;var n=s[h]={i:h,l:!1,exports:{}};return t[h].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=s,i.d=function(t,s,h){i.o(t,s)||Object.defineProperty(t,s,{enumerable:!0,get:h})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"h",{value:!0})},i.t=function(t,s){if(1&s&&(t=i(t)),8&s)return t;if(4&s&&"object"==typeof t&&t&&t.h)return t;var h=Object.create(null);if(i.r(h),Object.defineProperty(h,"default",{enumerable:!0,value:t}),2&s&&"string"!=typeof t)for(var n in t)i.d(h,n,function(s){return t[s]}.bind(null,n));return h},i.n=function(t){var s=t&&t.h?function(){return t.default}:function(){return t};return i.d(s,"a",s),s},i.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},i.p="",i(i.s=1)}([function(t,s,i){},function(t,s,i){"use strict";i.r(s);class h{constructor(){}}h.VX=.2,h.VY=.2;class n{constructor(){}static add(t,s){return[t[0]+s[0],t[1]+s[1]]}static sub(t,s){return[t[0]-s[0],t[1]-s[1]]}static scale(t,s){return[t[0]*s,t[1]*s]}static len2(t){return t[0]*t[0]+t[1]*t[1]}static len(t){return Math.sqrt(n.len2(t))}static min(t,s){return n.len2(s)<n.len2(t)?s:t}static max(t,s){return n.len2(s)>n.len2(t)?s:t}static normalize(t){return n.scale(t,1/n.len(t))}}class r{constructor(t,s){this.center=t,this.halfDimension=s}intersects(t){const s=n.add(this.halfDimension,t.halfDimension);return Math.abs(this.center[0]-t.center[0])<=s[0]&&Math.abs(this.center[1]-t.center[1])<=s[1]}containsPoint(t,s){return Math.abs(this.center[0]-t)<=this.halfDimension[0]&&Math.abs(this.center[1]-s)<=this.halfDimension[1]}get minX(){return this.center[0]-this.halfDimension[0]}get maxX(){return this.center[0]+this.halfDimension[0]}get minY(){return this.center[1]-this.halfDimension[1]}get maxY(){return this.center[1]+this.halfDimension[1]}}class e extends class{constructor(t){this.ctx=t.getContext("2d")}render(t){this.ctx.fillStyle="#000",this.ctx.fillRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.fillStyle="#0f0";for(const s of t.platforms)this.ctx.fillRect(s.aabb.minX,s.aabb.minY,2*s.aabb.halfDimension[0],2*s.aabb.halfDimension[1]);this.ctx.fillStyle="#f00",this.ctx.beginPath(),this.ctx.arc(t.ball.aabb.center[0],t.ball.aabb.center[1],t.ball.aabb.halfDimension[0],0,2*Math.PI),this.ctx.fill(),this.ctx.closePath()}}{constructor(t,s,i){super(t),this.u=s,this.g=i,this.M="",this.$=[],this.j=[t.width/s,t.height/i],this.k=n.scale(this.j,.5),this.A=new Uint8ClampedArray(i*s*3)}render(t){super.render(t);const s=this.ctx.getImageData(0,0,this.ctx.canvas.width,this.ctx.canvas.height);for(let t=0;t<this.g;t++){const i=Math.floor(this.k[1]+t*this.j[1]);for(let h=0;h<this.u;h++){const n=Math.floor(this.k[0]+h*this.j[0]);this.A[t*this.u*3+3*h+0]=s.data[i*this.ctx.canvas.width*4+4*n+0],this.A[t*this.u*3+3*h+1]=s.data[i*this.ctx.canvas.width*4+4*n+1],this.A[t*this.u*3+3*h+2]=s.data[i*this.ctx.canvas.width*4+4*n+2]}}let i="";const h=[];for(let t=0;t<this.g-1;t+=2){let s="";for(let i=0;i<this.u;i++){const n=`rgb(${this.A[t*this.u*3+3*i+0]},${this.A[t*this.u*3+3*i+1]},${this.A[t*this.u*3+3*i+2]})`,r=`rgb(${this.A[(t+1)*this.u*3+3*i+0]},${this.A[(t+1)*this.u*3+3*i+1]},${this.A[(t+1)*this.u*3+3*i+2]})`,o=`background:linear-gradient(${n}, ${n} 50%, ${r} 50%, ${r})`;0!==h.length&&h[h.length-1]===o||(h.push(o),s+=e.O),s+=e.C}s+=e.D,i+=s}if(i+=e.O,h.push(""),this.M===i){if(class{constructor(){}static isEqual(t,s){if(t===s)return!0;if(t.length!==s.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!==s[i])return!1;return!0}}.isEqual(this.$,h))return;this.$=h,i+=e.C}this.M=i,console.log(i,...h)}}e.O="%c",e.D="\n",e.C=" ";class o{constructor(t){this.aabb=t}}o.COLOR=new Uint8ClampedArray([0,255,0]);class c{constructor(t){this.aabb=t,this.v=[0,h.VY]}}c.COLOR=new Uint8ClampedArray([255,0,0]);class u{constructor(){this.platforms=[],this.ball=new c(new r([0,0],[0,0]))}}class a extends class{constructor(){this.R=void 0,this.S=0,this.U=0,this._=0,this.L=Date.now(),this.X=t=>{this.S=window.requestAnimationFrame(this.X);const s=t-this.U;this.U=t,this.update(s);const i=t-this._;void 0!==this.R?i>this.R&&(this._=t-i%this.R,this.render(i)):(this._=t,this.render(i))}}set fps(t){this.R=1e3/t}start(){if(!this.isRunning()){const t=Date.now()-this.L;this.U+=t,this._+=t,this.S=window.requestAnimationFrame(this.X)}}stop(){window.cancelAnimationFrame(this.S),this.S=0,this.L=Date.now()}isRunning(){return 0!==this.S}}{constructor(){super(),this.Y=new u;for(let t=a.q/2;t<a.F+a.F/a.P;t+=a.F/a.P)this.state.platforms.push(...this.B(t));const t=this.state.platforms[0].aabb.maxX+a.G/2;this.Y.ball.aabb.center[0]=t,this.Y.ball.aabb.halfDimension[0]=a.H,this.Y.ball.aabb.halfDimension[1]=a.H;const s=document.createElement("canvas");s.width=a.I,s.height=a.F,this.J=new e(s,a.K,a.N)}get state(){return this.Y}update(t){const s=-.05*t;this.Y.ball.aabb.center[1]+=s;const i=[];for(const t of this.state.platforms)t.aabb.center[1]+=s,t.aabb.maxY<0&&i.push(t);if(i.length>0){for(const t of i)this.state.platforms.splice(this.state.platforms.indexOf(t),1);this.state.platforms.push(...this.B(i[i.length-1].aabb.center[1]+a.F+a.F/a.P))}if(0!==this.Y.ball.v[1]){const s=[0,this.Y.ball.v[1]*t];this.Y.ball.aabb.center=n.add(this.Y.ball.aabb.center,s);for(const t of this.state.platforms)if(this.state.ball.aabb.intersects(t.aabb)){const i=this.Y.ball.aabb.halfDimension[1]+t.aabb.halfDimension[1]-Math.abs(this.Y.ball.aabb.center[1]-t.aabb.center[1]);this.Y.ball.aabb.center=n.sub(this.Y.ball.aabb.center,[0,Math.sign(s[1])*(i+.001)]);break}}if(0!==this.Y.ball.v[0]){const s=[this.Y.ball.v[0]*t,0];this.Y.ball.aabb.center=n.add(this.Y.ball.aabb.center,s);for(const t of this.state.platforms)if(this.state.ball.aabb.intersects(t.aabb)){const i=this.Y.ball.aabb.halfDimension[0]+t.aabb.halfDimension[0]-Math.abs(this.Y.ball.aabb.center[0]-t.aabb.center[0]);this.Y.ball.aabb.center=n.sub(this.Y.ball.aabb.center,[Math.sign(s[0])*(i+.001),0]);break}}this.Y.ball.aabb.minX<0&&(this.Y.ball.aabb.center=[0+this.Y.ball.aabb.halfDimension[0],this.Y.ball.aabb.center[1]]),this.Y.ball.aabb.maxX>a.I&&(this.Y.ball.aabb.center=[a.I-this.Y.ball.aabb.halfDimension[0],this.Y.ball.aabb.center[1]]),this.Y.ball.aabb.minY<0&&(this.Y.ball.aabb.center=[this.Y.ball.aabb.center[0],0+this.Y.ball.aabb.halfDimension[1]]),this.Y.ball.aabb.maxY>a.F&&(this.Y.ball.aabb.center=[this.Y.ball.aabb.center[0],a.F-this.Y.ball.aabb.halfDimension[1]])}render(t){this.J.render(this.Y)}B(t){const s=a.G+(a.I-2*a.G)*Math.random(),i=s-a.G/2-0,h=a.I-(s+a.G/2);return[new o(new r([i/2,t],[i/2,a.q/2])),new o(new r([s+a.G/2+h/2,t],[h/2,a.q/2]))]}}a.I=230,a.F=408,a.K=20,a.N=40,a.P=7,a.q=10,a.T=.2,a.G=a.T*a.I,a.V=.05,a.H=a.V*a.I;i(0);-1!==navigator.platform.toLowerCase().indexOf("mac")&&(document.getElementById("key1").textContent="⌥",document.getElementById("key2").textContent="⌘");const f=new a;f.fps=24,f.start(),document.addEventListener("keydown",t=>{"ArrowLeft"===t.key?f.state.ball.v[0]=-h.VX:"ArrowRight"===t.key?f.state.ball.v[0]=h.VX:"Escape"===t.key&&(f.isRunning()?f.stop():f.start())}),document.addEventListener("keyup",t=>{"ArrowLeft"!==t.key&&"ArrowRight"!==t.key||(f.state.ball.v[0]=0)})}]);